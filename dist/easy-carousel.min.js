!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define("EasyCarousel",[],s):"object"==typeof exports?exports.EasyCarousel=s():t.EasyCarousel=s()}(this,(()=>(()=>{"use strict";var t={d:(s,e)=>{for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)},s={};t.d(s,{default:()=>i});class e{constructor(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.container="string"==typeof t?document.querySelector(t):t,this.container?(this.settings=Object.assign({},e.defaults,s),this.currentIndex=this.settings.startPosition||0,this.previousIndex=null,this.autoplayInterval=null,this.originalItemsCount=0,this.cloneCount=0,this.drag={startX:0,endX:0,startY:0,endY:0,startTime:0,isDragging:!1,preventClick:!1,dragDistance:0},this.boundEvents={resize:this.onResize.bind(this),dragStart:this.onDragStart.bind(this),dragMove:this.onDragMove.bind(this),dragEnd:this.onDragEnd.bind(this),keydown:this.onKeydown.bind(this)},this.init()):console.error("EasyCarousel: Container element not found")}static get defaults(){return{items:3,margin:0,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,autoWidth:!1,startPosition:0,nav:!1,dots:!0,autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,lazyLoad:!1,animateIn:!1,animateOut:!1,responsive:{},responsiveRefreshRate:200}}init(){this.updateResponsiveSettings(),this.buildCarousel(),this.applyStyles(),this.registerEvents(),this.settings.nav&&this.createNavigation(),this.settings.dots&&this.createDots(),this.settings.autoplay&&this.startAutoplay(),this.settings.lazyLoad&&this.lazyLoadImages()}updateResponsiveSettings(){if(!this.settings.responsive||"undefined"==typeof window)return;const t=window.innerWidth,s=Object.keys(this.settings.responsive).map((t=>parseInt(t))).sort(((t,s)=>t-s));let i={};s.forEach((s=>{t>=s&&(i=this.settings.responsive[s])})),this.settings=Object.assign({},e.defaults,this.settings,i)}buildCarousel(){this.stage=document.createElement("div"),this.stage.className="ec-stage";const t=Array.from(this.container.children);if(this.originalItemsCount=t.length,this.items=[],this.settings.loop&&this.originalItemsCount>this.settings.items){this.cloneCount=this.settings.items;for(let s=this.originalItemsCount-this.cloneCount;s<this.originalItemsCount;s++){const e=this.createCarouselItem(t[s].cloneNode(!0),!0);this.stage.appendChild(e),this.items.push(e)}}if(t.forEach((t=>{const s=this.createCarouselItem(t,!1);this.stage.appendChild(s),this.items.push(s)})),this.settings.loop&&this.originalItemsCount>this.settings.items)for(let s=0;s<this.cloneCount;s++){const e=this.createCarouselItem(t[s].cloneNode(!0),!0);this.stage.appendChild(e),this.items.push(e)}this.container.innerHTML="",this.container.classList.add("easy-carousel"),this.container.appendChild(this.stage),this.settings.loop&&this.originalItemsCount>this.settings.items&&(this.currentIndex=this.cloneCount+(this.settings.startPosition||0))}createCarouselItem(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const e=document.createElement("div");return e.className="ec-item",s&&e.classList.add("ec-clone"),e.style.marginRight=`${this.settings.margin}px`,e.appendChild(t),e}applyStyles(){const t=100/this.settings.items;this.items.forEach((s=>{s.style.flex=`0 0 ${t}%`})),this.stage.style.display="flex",this.stage.style.transition="transform 0.3s ease",this.goTo(this.currentIndex)}registerEvents(){this.settings.autoplayHoverPause&&(this.container.addEventListener("mouseenter",(()=>this.stopAutoplay())),this.container.addEventListener("mouseleave",(()=>this.startAutoplay()))),(this.settings.touchDrag||this.settings.mouseDrag)&&(this.stage.addEventListener("mousedown",this.boundEvents.dragStart),this.stage.addEventListener("touchstart",this.boundEvents.dragStart),document.addEventListener("mousemove",this.boundEvents.dragMove),document.addEventListener("touchmove",this.boundEvents.dragMove,{passive:!1}),document.addEventListener("mouseup",this.boundEvents.dragEnd),document.addEventListener("touchend",this.boundEvents.dragEnd)),this.container.setAttribute("tabindex","0"),this.container.addEventListener("keydown",this.boundEvents.keydown),window.addEventListener("resize",this.boundEvents.resize),this.stage.addEventListener("click",(t=>{this.drag.preventClick&&(t.preventDefault(),t.stopPropagation(),this.drag.preventClick=!1)}),!0)}onKeydown(t){switch(t.key){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next()}}onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((()=>{this.updateResponsiveSettings(),this.applyStyles()}),this.settings.responsiveRefreshRate)}onDragStart(t){("mousedown"!==t.type||this.settings.mouseDrag)&&("touchstart"!==t.type||this.settings.touchDrag)&&(t.button&&0!==t.button||(t.preventDefault(),this.drag.isDragging=!0,this.drag.startTime=Date.now(),this.drag.preventClick=!1,"touchstart"===t.type?(this.drag.startX=t.touches[0].clientX,this.drag.startY=t.touches[0].clientY):(this.drag.startX=t.clientX,this.drag.startY=t.clientY),this.stage.style.transition="none",this.container.classList.add("is-dragging")))}onDragMove(t){if(!this.drag.isDragging)return;let s,e;if("touchmove"===t.type?(s=t.touches[0].clientX,e=t.touches[0].clientY):(s=t.clientX,e=t.clientY),this.drag.dragDistance=s-this.drag.startX,"touchmove"===t.type){const s=Math.abs(this.drag.dragDistance);if(Math.abs(e-this.drag.startY)>s)return void this.onDragEnd(t)}const i=this.container.offsetWidth/this.settings.items,n=-this.currentIndex*i,a=i;Math.abs(this.drag.dragDistance)>a&&(this.drag.dragDistance=(this.drag.dragDistance>0?1:-1)*a);const o=n+this.drag.dragDistance;this.stage.style.transform=`translateX(${o}px)`,Math.abs(this.drag.dragDistance)>5&&(this.drag.preventClick=!0),t.preventDefault()}onDragEnd(t){if(!this.drag.isDragging)return;this.drag.isDragging=!1,this.drag.endTime=Date.now();const s=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.dragDistance)/s;this.stage.style.transition="transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",this.container.classList.remove("is-dragging"),Math.abs(this.drag.dragDistance)>this.container.offsetWidth/this.settings.items*.2||e>.2?this.drag.dragDistance<0?this.next():this.prev():this.goTo(this.currentIndex),this.drag.dragDistance=0,window.getSelection&&window.getSelection().removeAllRanges()}goTo(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.settings.loop&&this.originalItemsCount>this.settings.items){let e=t;this.settings.animateOut&&null!==this.previousIndex&&this.items[this.previousIndex]&&(this.items[this.previousIndex].classList.remove(this.settings.animateIn),this.items[this.previousIndex].classList.add(this.settings.animateOut)),this.settings.animateIn&&this.items[e]&&e>=0&&e<this.items.length&&(this.items[e].classList.remove(this.settings.animateOut),this.items[e].classList.add(this.settings.animateIn)),this.previousIndex=this.currentIndex,this.currentIndex=e;const i=-this.currentIndex*(100/this.settings.items);s&&(this.stage.style.transition="none"),this.stage.style.transform=`translateX(${i}%)`,s||setTimeout((()=>{this.checkAndRepositionForInfiniteLoop()}),300),s&&setTimeout((()=>{this.stage.style.transition="transform 0.3s ease"}),50)}else{const s=this.items.length-this.settings.items,e=Math.max(0,Math.min(t,s));this.settings.animateOut&&null!==this.previousIndex&&this.items[this.previousIndex]&&(this.items[this.previousIndex].classList.remove(this.settings.animateIn),this.items[this.previousIndex].classList.add(this.settings.animateOut)),this.settings.animateIn&&this.items[e]&&(this.items[e].classList.remove(this.settings.animateOut),this.items[e].classList.add(this.settings.animateIn)),this.previousIndex=e,this.currentIndex=e;const i=-this.currentIndex*(100/this.settings.items);this.stage.style.transform=`translateX(${i}%)`}this.updateDots(),this.settings.lazyLoad&&this.lazyLoadImages()}checkAndRepositionForInfiniteLoop(){if(this.settings.loop&&!(this.originalItemsCount<=this.settings.items))if(this.currentIndex<this.cloneCount){const t=this.originalItemsCount+this.currentIndex;this.goTo(t,!0)}else if(this.currentIndex>=this.cloneCount+this.originalItemsCount){const t=this.currentIndex-this.originalItemsCount;this.goTo(t,!0)}}next(){this.goTo(this.currentIndex+1)}prev(){this.goTo(this.currentIndex-1)}createNavigation(){const t=document.createElement("div");t.className="ec-nav";const s=document.createElement("button");s.innerText="<",s.className="ec-prev",s.addEventListener("click",(()=>this.prev()));const e=document.createElement("button");e.innerText=">",e.className="ec-next",e.addEventListener("click",(()=>this.next())),t.appendChild(s),t.appendChild(e),this.container.appendChild(t)}createDots(){this.dotsContainer=document.createElement("div"),this.dotsContainer.className="ec-dots";const t=this.settings.loop&&this.originalItemsCount>this.settings.items?this.originalItemsCount-this.settings.items+1:this.items.length-this.settings.items+1;this.dots=[];for(let s=0;s<t;s++){const t=document.createElement("div");t.className="ec-dot",t.addEventListener("click",(()=>{this.settings.loop&&this.originalItemsCount>this.settings.items?this.goTo(this.cloneCount+s):this.goTo(s)})),this.dotsContainer.appendChild(t),this.dots.push(t)}this.updateDots(),this.container.appendChild(this.dotsContainer)}updateDots(){if(!this.dots)return;let t;t=this.settings.loop&&this.originalItemsCount>this.settings.items?this.currentIndex<this.cloneCount?this.originalItemsCount-this.cloneCount+this.currentIndex:this.currentIndex>=this.cloneCount+this.originalItemsCount?this.currentIndex-this.cloneCount-this.originalItemsCount:this.currentIndex-this.cloneCount:this.currentIndex,this.dots.forEach(((s,e)=>{s.classList.toggle("active",e===t)}))}startAutoplay(){this.stopAutoplay(),this.autoplayInterval=setInterval((()=>this.next()),this.settings.autoplayTimeout)}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}lazyLoadImages(){this.items.slice(this.currentIndex,this.currentIndex+this.settings.items).forEach((t=>{t.querySelectorAll("[data-src]").forEach((t=>{"img"===t.tagName.toLowerCase()?t.src=t.dataset.src:t.style.backgroundImage=`url('${t.dataset.src}')`,t.removeAttribute("data-src")}))}))}destroy(){(this.settings.touchDrag||this.settings.mouseDrag)&&(this.stage.removeEventListener("mousedown",this.boundEvents.dragStart),this.stage.removeEventListener("touchstart",this.boundEvents.dragStart),document.removeEventListener("mousemove",this.boundEvents.dragMove),document.removeEventListener("touchmove",this.boundEvents.dragMove),document.removeEventListener("mouseup",this.boundEvents.dragEnd),document.removeEventListener("touchend",this.boundEvents.dragEnd)),window.removeEventListener("resize",this.boundEvents.resize),this.container.removeEventListener("keydown",this.boundEvents.keydown),this.stopAutoplay(),this.container.classList.remove("easy-carousel"),this.container.removeAttribute("tabindex");const t=Array.from(this.stage.querySelectorAll(".ec-item:not(.ec-clone)")).map((t=>t.firstElementChild));this.container.innerHTML="",t.forEach((t=>this.container.appendChild(t))),this.items=null,this.stage=null,this.dots=null,this.dotsContainer=null,this.boundEvents=null,this.originalItemsCount=0,this.cloneCount=0}}const i=e;return s=s.default})()));