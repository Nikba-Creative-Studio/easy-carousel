(()=>{class t{constructor(e,s={}){this.container="string"==typeof e?document.querySelector(e):e,this.container?(this.settings=Object.assign({},t.defaults,s),this.currentIndex=this.settings.startPosition||0,this.previousIndex=null,this.autoplayInterval=null,this.drag={startX:0,endX:0,startY:0,endY:0,startTime:0,isDragging:!1,preventClick:!1,dragDistance:0},this.boundEvents={resize:this.onResize.bind(this),dragStart:this.onDragStart.bind(this),dragMove:this.onDragMove.bind(this),dragEnd:this.onDragEnd.bind(this),keydown:this.onKeydown.bind(this)},this.init()):console.error("EasyCarousel: Container element not found")}static get defaults(){return{items:3,margin:0,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,autoWidth:!1,startPosition:0,nav:!1,dots:!0,autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,lazyLoad:!1,animateIn:!1,animateOut:!1,responsive:{},responsiveRefreshRate:200}}init(){this.updateResponsiveSettings(),this.buildCarousel(),this.applyStyles(),this.registerEvents(),this.settings.nav&&this.createNavigation(),this.settings.dots&&this.createDots(),this.settings.autoplay&&this.startAutoplay(),this.settings.lazyLoad&&this.lazyLoadImages()}updateResponsiveSettings(){if(!this.settings.responsive||"undefined"==typeof window)return;const e=window.innerWidth,s=Object.keys(this.settings.responsive).map((t=>parseInt(t))).sort(((t,e)=>t-e));let i={};s.forEach((t=>{e>=t&&(i=this.settings.responsive[t])})),this.settings=Object.assign({},t.defaults,this.settings,i)}buildCarousel(){this.stage=document.createElement("div"),this.stage.className="ec-stage";const t=Array.from(this.container.children);this.items=t.map((t=>{const e=document.createElement("div");return e.className="ec-item",e.style.marginRight=`${this.settings.margin}px`,e.appendChild(t),this.stage.appendChild(e),e})),this.container.innerHTML="",this.container.classList.add("easy-carousel"),this.container.appendChild(this.stage)}applyStyles(){const t=100/this.settings.items;this.items.forEach((e=>{e.style.flex=`0 0 ${t}%`})),this.stage.style.display="flex",this.stage.style.transition="transform 0.3s ease",this.goTo(this.currentIndex)}registerEvents(){this.settings.autoplayHoverPause&&(this.container.addEventListener("mouseenter",(()=>this.stopAutoplay())),this.container.addEventListener("mouseleave",(()=>this.startAutoplay()))),(this.settings.touchDrag||this.settings.mouseDrag)&&(this.stage.addEventListener("mousedown",this.boundEvents.dragStart),this.stage.addEventListener("touchstart",this.boundEvents.dragStart,{passive:!0}),document.addEventListener("mousemove",this.boundEvents.dragMove),document.addEventListener("touchmove",this.boundEvents.dragMove,{passive:!1}),document.addEventListener("mouseup",this.boundEvents.dragEnd),document.addEventListener("touchend",this.boundEvents.dragEnd)),this.container.setAttribute("tabindex","0"),this.container.addEventListener("keydown",this.boundEvents.keydown),window.addEventListener("resize",this.boundEvents.resize),this.stage.addEventListener("click",(t=>{this.drag.preventClick&&(t.preventDefault(),t.stopPropagation(),this.drag.preventClick=!1)}),!0)}onKeydown(t){switch(t.key){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next()}}onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((()=>{this.updateResponsiveSettings(),this.applyStyles()}),this.settings.responsiveRefreshRate)}onDragStart(t){("mousedown"!==t.type||this.settings.mouseDrag)&&("touchstart"!==t.type||this.settings.touchDrag)&&(t.button&&0!==t.button||(t.preventDefault(),this.drag.isDragging=!0,this.drag.startTime=Date.now(),this.drag.preventClick=!1,"touchstart"===t.type?(this.drag.startX=t.touches[0].clientX,this.drag.startY=t.touches[0].clientY):(this.drag.startX=t.clientX,this.drag.startY=t.clientY),this.stage.style.transition="none",this.container.classList.add("is-dragging")))}onDragMove(t){if(!this.drag.isDragging)return;let e,s;if("touchmove"===t.type?(e=t.touches[0].clientX,s=t.touches[0].clientY):(e=t.clientX,s=t.clientY),this.drag.dragDistance=e-this.drag.startX,"touchmove"===t.type){const e=Math.abs(this.drag.dragDistance);if(Math.abs(s-this.drag.startY)>e)return void this.onDragEnd(t)}const i=this.container.offsetWidth/this.settings.items,n=-this.currentIndex*i,a=i;Math.abs(this.drag.dragDistance)>a&&(this.drag.dragDistance=(this.drag.dragDistance>0?1:-1)*a);const r=n+this.drag.dragDistance;this.stage.style.transform=`translateX(${r}px)`,Math.abs(this.drag.dragDistance)>5&&(this.drag.preventClick=!0),t.preventDefault()}onDragEnd(t){if(!this.drag.isDragging)return;this.drag.isDragging=!1,this.drag.endTime=Date.now();const e=this.drag.endTime-this.drag.startTime,s=Math.abs(this.drag.dragDistance)/e;this.stage.style.transition="transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",this.container.classList.remove("is-dragging"),Math.abs(this.drag.dragDistance)>this.container.offsetWidth/this.settings.items*.2||s>.2?this.drag.dragDistance<0?this.next():this.prev():this.goTo(this.currentIndex),this.drag.dragDistance=0,window.getSelection&&window.getSelection().removeAllRanges()}goTo(t){const e=this.items.length-this.settings.items,s=this.settings.loop?t%this.items.length:Math.max(0,Math.min(t,e));this.settings.animateOut&&null!==this.previousIndex&&this.items[this.previousIndex]&&(this.items[this.previousIndex].classList.remove(this.settings.animateIn),this.items[this.previousIndex].classList.add(this.settings.animateOut)),this.settings.animateIn&&this.items[s]&&(this.items[s].classList.remove(this.settings.animateOut),this.items[s].classList.add(this.settings.animateIn)),this.previousIndex=s,this.currentIndex=s;const i=-this.currentIndex*(100/this.settings.items);this.stage.style.transform=`translateX(${i}%)`,this.updateDots(),this.settings.lazyLoad&&this.lazyLoadImages()}next(){this.goTo(this.currentIndex+1)}prev(){this.goTo(this.currentIndex-1)}createNavigation(){const t=document.createElement("div");t.className="ec-nav";const e=document.createElement("button");e.innerText="<",e.className="ec-prev",e.addEventListener("click",(()=>this.prev()));const s=document.createElement("button");s.innerText=">",s.className="ec-next",s.addEventListener("click",(()=>this.next())),t.appendChild(e),t.appendChild(s),this.container.appendChild(t)}createDots(){this.dotsContainer=document.createElement("div"),this.dotsContainer.className="ec-dots";const t=this.items.length-this.settings.items+1;this.dots=[];for(let e=0;e<t;e++){const t=document.createElement("div");t.className="ec-dot",t.addEventListener("click",(()=>this.goTo(e))),this.dotsContainer.appendChild(t),this.dots.push(t)}this.updateDots(),this.container.appendChild(this.dotsContainer)}updateDots(){this.dots&&this.dots.forEach(((t,e)=>{t.classList.toggle("active",e===this.currentIndex)}))}startAutoplay(){this.stopAutoplay(),this.autoplayInterval=setInterval((()=>this.next()),this.settings.autoplayTimeout)}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}lazyLoadImages(){this.items.slice(this.currentIndex,this.currentIndex+this.settings.items).forEach((t=>{t.querySelectorAll("[data-src]").forEach((t=>{"img"===t.tagName.toLowerCase()?t.src=t.dataset.src:t.style.backgroundImage=`url('${t.dataset.src}')`,t.removeAttribute("data-src")}))}))}destroy(){(this.settings.touchDrag||this.settings.mouseDrag)&&(this.stage.removeEventListener("mousedown",this.boundEvents.dragStart),this.stage.removeEventListener("touchstart",this.boundEvents.dragStart),document.removeEventListener("mousemove",this.boundEvents.dragMove),document.removeEventListener("touchmove",this.boundEvents.dragMove),document.removeEventListener("mouseup",this.boundEvents.dragEnd),document.removeEventListener("touchend",this.boundEvents.dragEnd)),window.removeEventListener("resize",this.boundEvents.resize),this.container.removeEventListener("keydown",this.boundEvents.keydown),this.stopAutoplay(),this.container.classList.remove("easy-carousel"),this.container.removeAttribute("tabindex");const t=Array.from(this.stage.querySelectorAll(".ec-item")).map((t=>t.firstElementChild));this.container.innerHTML="",t.forEach((t=>this.container.appendChild(t))),this.items=null,this.stage=null,this.dots=null,this.dotsContainer=null,this.boundEvents=null}}window.EasyCarousel=t})();